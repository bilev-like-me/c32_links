## Сервис коротких ссылок. Тестовое задание для компании Coin32

## Стек
* Сервер - Django
* Кеш - Redis
* Задания по расписанию - Celery
* Контейнеризация - Docker-compose
* Виртуальная среда - Pipenv
* БД - MySql

## Описание работы
Основаня страница содержит поля для ввода длинных ссылок, пользовательского пути (__subpart__) и таблицу со списком ссылок пользователя. Пользователи идентифицируются с использованием сессий Django.
В слудае некорректных данных выводятся сообщения об ошибке:
- при отсутствии длинной ссылки
- при некорректно введенном __subpart__ (недопустимые символы)
- если в базе уже существует введенный __subpart__
- при попытке перехода на недоступную ссылку из БД
- при попытке перехода на некорректную ссылку, отсутствующую в БД
(Проверка корректности и доступности длинной ссылки при добавлении не производится, предусматривая теоретическую возможность добавления переходов на еще не существующие ресурсы. В слудае необходимости это можно реализовать, например, с использованием регуляярных выражений.)

При переходе по новой ссылке она добавляется в кеш. Удаление из кеша проиходит по TTL, который указывается в секундах параметром в файле __settings.py__
```
CACHES_TTL = 600
```

Удаление старых записей проиходит при помощи планировщика заданий __celery_beat__. Периодичность настраивается в разделе __Periodic tasks__ через административную панель ```<your_domain>/admin/```. 
Кроме периодичности срабатывания, необходимо указать время жизни ссылок в аргументах (__Arguments -> Keyword arguments__) в виде Json словаря (любой парамент можно опустить):
```
{
  "weeks": 1,
  "days": 2,
  "hours": 3,
  "minutes": 4
}
```

Генерация уникальных коротких ссылок __subpart__ выполнена при помощи библиотеки __Hashid__, эти данные одновременно используются, как поле __id__ в БД.

Конфиденциальные данные вынесены в отдельные файлы в корне проекти:
```my_secrets.py``` - секретный ключ Django и добавочные данные для формирования хешей коротких ссылок:
```
SECRET_KEY = "< very-secret-string #1 >"
HASHID_FIELD_SALT = "< very-secret-string #2 >"
```
```mysql.cnf``` - настройки и данные для доступа к БД:
```
[client]
database = db_mane
user = db_user
password = db_user_password
default-character-set = utf8
host = db # имя контейнера Docker в БД
port = 3306
```
